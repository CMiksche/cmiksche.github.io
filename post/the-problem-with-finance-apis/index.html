<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>The Problem with Finance APIs :: M5E&#39;s Blog</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Since 2014 I invest and trade with stocks. Since then, I always wanted to create programs which make my life as an Investor easier and since then my journey with always reliving finance API problems started.
Unfortunately I didn&amp;rsquo;t find my first PHP scripts which tried to get stock data - so I don&amp;rsquo;t remember which API stopped back then, but the rest of my journey was well documented with the help of Git." />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://blog.m5e.de/post/the-problem-with-finance-apis/" />




<link rel="stylesheet" href="https://blog.m5e.de/assets/style.css">






<link rel="apple-touch-icon" href="https://blog.m5e.de/img/apple-touch-icon-192x192.png">

  <link rel="shortcut icon" href="https://blog.m5e.de/img/favicon/orange.png">



<meta name="twitter:card" content="summary" />

  
    <meta name="twitter:site" content="CMiksche" />
  
    <meta name="twitter:creator" content="" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="The Problem with Finance APIs">
<meta property="og:description" content="Since 2014 I invest and trade with stocks. Since then, I always wanted to create programs which make my life as an Investor easier and since then my journey with always reliving finance API problems started.
Unfortunately I didn&amp;rsquo;t find my first PHP scripts which tried to get stock data - so I don&amp;rsquo;t remember which API stopped back then, but the rest of my journey was well documented with the help of Git." />
<meta property="og:url" content="https://blog.m5e.de/post/the-problem-with-finance-apis/" />
<meta property="og:site_name" content="M5E&#39;s Blog" />

  
    <meta property="og:image" content="https://blog.m5e.de/img/favicon/orange.png">
  

<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">


  <meta property="article:published_time" content="2021-12-08 00:00:00 &#43;0000 UTC" />












</head>
<body class="orange">


<div class="container center headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    M5E&#39;s Blog
  </div>
</a>

    </div>
    <div class="menu-trigger">menu</div>
  </div>
  
    <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/contact">Contact &amp; Imprint</a></li>
        
      
        
          <li><a href="https://github.com/cmiksche">GitHub</a></li>
        
      
        
          <li><a href="https://linkedin.com/in/cmiksche/">LinkedIn</a></li>
        
      
        
          <li><a href="https://twitter.com/cmiksche">Twitter</a></li>
        
      
      
    

    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/contact">Contact &amp; Imprint</a></li>
      
    
      
        <li><a href="https://github.com/cmiksche">GitHub</a></li>
      
    
      
        <li><a href="https://linkedin.com/in/cmiksche/">LinkedIn</a></li>
      
    
      
        <li><a href="https://twitter.com/cmiksche">Twitter</a></li>
      
    
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="https://blog.m5e.de/post/the-problem-with-finance-apis/">The Problem with Finance APIs</a></h1>
  <div class="post-meta">
    
      <span class="post-date">
        2021-12-08 
      </span>
    
    
  </div>

  
  <span class="post-tags">
    
    #<a href="https://blog.m5e.de/tags/Problem/">Problem</a>&nbsp;
    
    #<a href="https://blog.m5e.de/tags/finance/">finance</a>&nbsp;
    
    #<a href="https://blog.m5e.de/tags/APIs/">APIs</a>&nbsp;
    
    #<a href="https://blog.m5e.de/tags/currencies/">currencies</a>&nbsp;
    
    #<a href="https://blog.m5e.de/tags/shares/">shares</a>&nbsp;
    
    #<a href="https://blog.m5e.de/tags/stock/">stock</a>&nbsp;
    
  </span>
  

  

  

  <div class="post-content"><div>
        <p>Since 2014 I invest and trade with stocks. Since then, I always wanted to create programs which make my life as an Investor easier and since then my journey with always reliving finance API problems started.</p>
<p>Unfortunately I didn&rsquo;t find my first PHP scripts which tried to get stock data - so I don&rsquo;t remember which API stopped back then, but the rest of my journey was well documented with the help of Git.</p>
<h3 id="yahoo-stock-data-api">Yahoo Stock Data API<a href="#yahoo-stock-data-api" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Read Symbols from Database</span>
symbols <span style="color:#f92672">=</span> datab<span style="color:#f92672">.</span>getSymbols()

<span style="color:#75715e"># Get Price Data for each Symbol from yahoo</span>
<span style="color:#66d9ef">for</span> sym <span style="color:#f92672">in</span> symbols:

    url <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;http://finance.yahoo.com/d/quotes.csv?s=&#34;</span><span style="color:#f92672">+</span>sym<span style="color:#f92672">+</span><span style="color:#e6db74">&#34;&amp;f=sabd&#34;</span>

    <span style="color:#66d9ef">with</span> closing(requests<span style="color:#f92672">.</span>get(url, stream<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)) <span style="color:#66d9ef">as</span> r:
</code></pre></div><p>Guess what: The API is not available anymore.</p>
<h3 id="yahoo-currency-data-api">Yahoo Currency Data API<a href="#yahoo-currency-data-api" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">with</span> urllib<span style="color:#f92672">.</span>request<span style="color:#f92672">.</span>urlopen(<span style="color:#e6db74">&#34;http://finance.yahoo.com/webservice/v1/symbols/allcurrencies/quote?format=json&#34;</span>) <span style="color:#66d9ef">as</span> url:
</code></pre></div><p>Current Currency rates on a stable API? Not with Yahoo!</p>
<h3 id="coinmarketcap-free-crypto-api">CoinMarketCap Free Crypto API<a href="#coinmarketcap-free-crypto-api" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Get Market Data</span>
<span style="color:#66d9ef">with</span> urllib<span style="color:#f92672">.</span>request<span style="color:#f92672">.</span>urlopen(<span style="color:#e6db74">&#34;https://api.coinmarketcap.com/v1/ticker/?convert=EUR&amp;limit=0&#34;</span>) <span style="color:#66d9ef">as</span> url:
</code></pre></div><p>Free Crypto prices? No! The guys behind CoinMarketCap found out that offering a free and open service is stupid and now ask for money!</p>
<h2 id="finsymbols-python-lib">Finsymbols Python lib<a href="#finsymbols-python-lib" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>Mainly get obtained via web scraping. I didn&rsquo;t check all the functions, but it seems that many are outdated now.</p>
<h2 id="iex-exchange">IEX Exchange<a href="#iex-exchange" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>Back in the day I was crazy about this. A whole exchange which advertised it was made for developers with a free API.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">iexurl <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://api.iextrading.com/1.0/stock/&#34;</span><span style="color:#f92672">+</span>sym<span style="color:#f92672">+</span><span style="color:#e6db74">&#34;/quote&#34;</span>
<span style="color:#66d9ef">with</span> urllib<span style="color:#f92672">.</span>request<span style="color:#f92672">.</span>urlopen(iexurl) <span style="color:#66d9ef">as</span> url:
</code></pre></div><p>Ha! Markets move too fast to provide the same URL for a longer period! You now have to use a new one, and it is not even free anymore.</p>
<h2 id="exchangeratesapiio">exchangeratesapi.io<a href="#exchangeratesapiio" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>Was a free and open source service with API for current exchange rates from the ECB.</p>
<p>The guy behind it sold it to a company which is owned by a big American Corporation. Of course, they now ask for money, even while there are many APIs which offer the same for free.</p>
<h2 id="learnings">Learnings<a href="#learnings" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>These are not even all APIs that changed - I used other ones before that. I use finance APIs since 2014, and I never encountered one which didn&rsquo;t change after a few years or months.</p>
<p>So to rely on any finance API alone sounds stupid to me now because even the biggest players in this area changed their API dramatically multiple times.</p>
<h2 id="the-solution">The Solution<a href="#the-solution" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>I think the only solution for that problem is to create a wrapper around multiple APIs, check which APIs are online and give the fastest responses and deliver the information from these APIs.</p>
<p>Because there are many APIs which deliver the data from the European Central Bank and have a similar / compatible API to what exchangeratesapi.io had back in the day, I created two wrappers for currencies:</p>
<p><a href="https://github.com/CMiksche/exchangerates-wrapper">exchangerates-wrapper</a> outputs a URL to an API which is online, and you can also define which currencies need to be supported from the API. It&rsquo;s written in TypeScript and usable for projects in the Node ecosystem.</p>
<p><a href="https://gitlab.com/cmiksche/go-currency-wrapper">go-currency-wrapper</a> is the same, but for projects which use the Go programming language.</p>
<h3 id="what-about-stocks-and-crypto">What about stocks and crypto?<a href="#what-about-stocks-and-crypto" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>While I plan similar projects for stocks and cryptocurrencies, I am currently not sure if or when I will release it to the public. However, other projects also have similar ideas: <a href="https://github.com/piquette/finance-go/issues/14">https://github.com/piquette/finance-go/issues/14</a></p>

      </div></div>

  
  
<div class="pagination">
    <div class="pagination__title">
        <span class="pagination__title-h">Read other posts</span>
        <hr />
    </div>
    <div class="pagination__buttons">
        
        
        <span class="button next">
            <a href="https://blog.m5e.de/post/the-evergrande-situation/">
                <span class="button__text">The Evergrande situation</span>
                <span class="button__icon">→</span>
            </a>
        </span>
        
    </div>
</div>

  

  

</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2021 Powered by <a href="http://gohugo.io">Hugo</a></span>
    
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
  </div>
</footer>

<script src="https://blog.m5e.de/assets/main.js"></script>
<script src="https://blog.m5e.de/assets/prism.js"></script>







  
</div>

</body>
</html>
